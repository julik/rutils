== Добро пожаловать в RuTils

RuTils - простой обработчик русского текста, позволяющий использовать и обрабатывать
русский текст несколькими несложными способами. Основная цель RuTils - сделать
разработку русскоязычных приложений на Ruby (и Rails) максимально простой и приятной (в идеале - столь же
простой как и разработку оных на английском)

Весь функционал RuTils поддерживает только UTF-8 (настройка $KCODE / KanjiCode 'u'). Стандартно работа RuTils проверяется
как на стандартной версии Ruby, так и на парсере регулярных выражений Oniguruma (правда имейте в виду, что с ним
Gilenson работает медленнее).


Это версия RuTils

	$Revision$
	
Пожалуйста упоминайте версию при сообщении ошибок.

Удостоверьтесь, что ваш скрипт правильно обрабатывает Unicode - то есть:

* Переменная $KCODE включена в режим 'u'
* В скрипт загружена библиотека jcode

Если вы используете RuTils для сайта под mod_ruby воспользуйтесь директивой RubyKanjiCode в своем httpd.conf.

== Cумма прописью и выбор числительного

RuTils реализует сумму прописью для целых и дробных чисел, с дополнительным учетом рода. Например:

	4.propisju	=> "четыре"
	345.propisju => "триста сорок пять"
	231.propisju(2) => "двести тридцать одна"
	341.propisju_items(1, "чемодан", "чемодана", "чемоданов") => "триста сорок один чемодан"
	(212.40).propisju_items(2, "сволочь", "сволочи", "сволочей") => "двести двенадцать целых четыре десятых сволочи"
	
Также реализуется выбор варианта числительного в зависимости от числа

	15.items("кодер", "кодера", "кодеров") => "кодеров"

== Транслит

RuTils на данный момент реализует простейший транслит "в одну сторону".

 	"Вот такое вот дело".translify => "Vot takoye vot delo"
	"Несомненный прогресс по сравнению с PHP".dirify => "nesomnennyi-progress-po-sravneniu-s-php"
	
В ближайшее время будет добавлен BiDi-транслит.

== Обработка русской типографики в HTML

RuTils включает Gilenson - порт Тыпографицы[http://pixel-apes.com/typografica] от
Pixel Apes на Ruby. Тыпографица - механизм автоматической расстановки подстановок в тексте
перед его выводом в HTML, оформляющий неразрывные пробелы, типографские кавычки
и реализующая элементарные макроподстановки.

Большое спасибо Роману Иванову aka Kukutz и Николаю Яремко aka Kuso Mendokuzee за изначальную реализацию
на PHP.

Имейте в виду, что на баги в Gilenson жаловаться разработчикам Typografica не стоит -
они вас не поймут и будут правы. Поддержку Gilenson PixelApes не осуществляют.

В комплекте также есть скрипт gilensize, которым можно поточно обрабатывать Unicode-тексты в среде UNIX
пользуясь стандартным выводом

	$ cat myfile.txt | gilensize > myfile.html

== Интеграция с Rails, RedCloth и BlueCloth

RuTils в первую очередь задумывался как максимально "прозрачный" механизм обработки русского текста
в контексте Rails-приложения. Если вы используете RuTils в одном приложении с RedCloth или BlueCloth,
RuTils автоматически будет обрабатывать типографику во всех текстах, пропускаемых через них. Имейте в виду, что для
корректной работы этой функции RuTils надо загружать после модулей RedCloth и BlueCloth.


В принципе если вы пользуетесь RedCloth или BlueCloth все что ими обрабатывается будет автоматически
обрабатываться и Gilenson'ом тоже. В случае с RedCloth Glienson автоматически заменяет стандартные для
Textile английские кавычки и типографские знаки на свои - русские. В случае BlueCloth Gilenson используется
как "декоратор" Markdown.

Перегрузку всех функций (RedCloth, BlueCloth и компоненты Rails) можно включать и отключать в любое время
с помощью метода overrides= модуля RuTils. Когда перегрузка выключена, все сторонние библиотеки будут работать
в стандартном режиме (например, RedCloth будет расставлять английские типографские кавычки). 

== Требования

* Ruby 1.8.2, немного прямых рук.
* Rake[http://rake.rubyforge.org], Rails, RedCloth и BlueCloth для выполнения тестов 

== Как использовать

Просто включите rutils в свою программу как gem

	require_gem 'rutils'
	
или как библиотеку

	require 'rutils'
	
== Где получить помощь

На странице проекта на RubyForge[http://rubyforge.org/projects/rutils]

== Работает ли это с текстом  в кодировке Windows-1251

Нет и никогда не будет. 